---
layout: post
title: "COVID-19 Gibraltar historical statistics"
categories: [gibraltar]
image: covid.png
---

The Gibraltar Government publishes a daily count of COVID-19 conducted tests as well as how many cases are active cases and how recoveries there have been, but there is no historical information available so I have recorded the series since these started being published on the 12th March 2020.

Last updated: _<span id="text_last_update"></span>_

<p style="text-align: center;">
  Population tested: <span id="text_population_tested"></span>
</p>

<p style="text-align: center;">
  Population infected: <span id="text_population_infected"></span>
</p>

<p style="text-align: center;">
  Recovery rate: <b><span id="text_recovery_rate"></span></b>
</p>

<p style="text-align: center;">
  Mortality rate: <b><span id="text_mortality_rate"></span></b>
</p>

<link href="{{ base.url | prepend: site.url }}/assets/js/apexcharts/styles.css" rel="stylesheet" />
<script src="{{ base.url | prepend: site.url }}/assets/js/apexcharts/apexcharts.min.js"></script>
<script src="{{ base.url | prepend: site.url }}/assets/js/covid19-gibraltar.js"></script>

  <style>
      
    .chart {
      max-width: 800px;
      margin: 35px auto;
    }
      
  </style>

  <div id="chart_active_recovered" class="chart"></div>
  <div id="chart_tests" class="chart"></div>

Source: [HM Government of Gibraltar](https://www.gibraltar.gov.gi/covid19)

<script>

// Calculate and show key KPIs

var current_active = series.covid19GibraltarSeries.active.slice(-1)[0];
var current_recovered = series.covid19GibraltarSeries.recovered.slice(-1)[0];
var current_total = current_active + current_recovered;
var current_deceased = series.covid19GibraltarSeries.deceased.slice(-1)[0];
var current_tests_pending = series.covid19GibraltarSeries.tests_pending.slice(-1)[0];
var current_tests_received = series.covid19GibraltarSeries.tests_received.slice(-1)[0];
var current_tests_total = current_tests_pending + current_tests_received;
const current_last_update = new Date(Date.parse(series.covid19GibraltarSeries.dates.slice(-1)[0]));

var population = 33693;
var population_tested = (current_tests_total / population) * 100;
var population_infected = (current_total / population) * 100;
var recovery_rate = (current_recovered / (current_active + current_recovered)) * 100;
var mortality_rate = (current_deceased / population) * 100;

document.getElementById("text_population_tested").innerHTML = "<b>" + current_tests_total.toLocaleString() + " (" + population_tested.toFixed(2) + "%)</b> of which " + current_tests_received.toLocaleString() + " tests have been received";
document.getElementById("text_population_infected").innerHTML = "<b>" + current_total.toLocaleString() + " (" + population_infected.toFixed(2) + "%)</b> of which " + current_active.toLocaleString() + " remain active";
document.getElementById("text_recovery_rate").innerHTML = recovery_rate.toFixed(2) + "%";
document.getElementById("text_mortality_rate").innerHTML = mortality_rate.toFixed(2) + "%";
document.getElementById("text_last_update").innerHTML = current_last_update.toDateString();


// Calculate new cases series
var newcases = [];

var previous_day_infected = 0;

for(var i = 0; i < series.covid19GibraltarSeries.active.length; i++) {
  current_infected = series.covid19GibraltarSeries.active[i] + series.covid19GibraltarSeries.recovered[i] + series.covid19GibraltarSeries.deceased[i];

  newcases[i] = current_infected - previous_day_infected;

  previous_day_infected = current_infected
}

series.covid19GibraltarSeries.newcases = newcases;


// Configure and show charts

var options_active_recovered = {
  series: [{
      data: series.covid19GibraltarSeries.active,
      name: "Active"
    },
    {
      data: series.covid19GibraltarSeries.recovered,
      name: "Recovered"
    },
    {
      data: series.covid19GibraltarSeries.deceased,
      name: "Deceased"
    },
    {
      data: series.covid19GibraltarSeries.newcases,
      name: "Daily new cases",
      type: 'column'
    }

  ],
  chart: {
    height: 350,
    type: 'line',
    id: 'active-recovered-chart',
  },

  legend: {
    position: 'top'
  },
  
  dataLabels: {
    enabled: false
  },
  colors: [
    '#da1f28', '#9bbb59', '#000000', '#66b2ff'
  ],
  stroke: {
    curve: 'straight',
    width: [3, 3, 3, 0]
  },
  grid: {
    padding: {
      right: 30,
      left: 20
    }
  },
  title: {
    text: 'Gibraltar COVID-19 Active vs. Recovered cases',
    align: 'left'
  },

  labels: series.covid19GibraltarSeries.dates,

  xaxis: {
    type: 'datetime',
  },
  yaxis: [{
          title: {
            text: 'Number of people',
          }
        }]
};


// Setup graphs showing the testing results


var options_tests = {
  series: [
    {
      data: series.covid19GibraltarSeries.tests_received,
      name: "Received"
    },
    {
      data: series.covid19GibraltarSeries.tests_pending,
      name: "Pending"
    }
  ],
  chart: {
    height: 350,
    type: 'line',
    id: 'active-tests-chart',
    stacked: true
  },

  legend: {
    position: 'top'
  },
  

  annotations: {
    yaxis: [{
      y: 8200,
      borderColor: '#00E396',
      label: {
        borderColor: '#00E396',
        style: {
          color: '#fff',
          background: '#00E396',
        },
        text: 'Support',
      }
    }, {
      y: 8600,
      y2: 9000,
      borderColor: '#000',
      fillColor: '#FEB019',
      opacity: 0.2,
      label: {
        borderColor: '#333',
        style: {
          fontSize: '10px',
          color: '#333',
          background: '#FEB019',
        },
        text: 'Y-axis range',
      }
    }],
    xaxis: [{
      x: new Date('23 Nov 2017').getTime(),
      strokeDashArray: 0,
      borderColor: '#775DD0',
      label: {
        borderColor: '#775DD0',
        style: {
          color: '#fff',
          background: '#775DD0',
        },
        text: 'Anno Test',
      }
    }, {
      x: new Date('26 Nov 2017').getTime(),
      x2: new Date('28 Nov 2017').getTime(),
      fillColor: '#B3F7CA',
      opacity: 0.4,
      label: {
        borderColor: '#B3F7CA',
        style: {
          fontSize: '10px',
          color: '#fff',
          background: '#00E396',
        },
        offsetY: -10,
        text: 'X-axis range',
      }
    }],
    points: [{
      x: new Date('01 Dec 2017').getTime(),
      y: 8607.55,
      marker: {
        size: 8,
        fillColor: '#fff',
        strokeColor: 'red',
        radius: 2,
        cssClass: 'apexcharts-custom-class'
      },
      label: {
        borderColor: '#FF4560',
        offsetY: 0,
        style: {
          color: '#fff',
          background: '#FF4560',
        },

        text: 'Point Annotation',
      }
    }]
  },
  dataLabels: {
    enabled: false
  },
  colors: [
    '#39639d','#323232'
  ],
  stroke: {
    curve: 'straight',
    width: 3
  },
  grid: {
    padding: {
      right: 30,
      left: 20
    }
  },
  title: {
    text: 'Gibraltar COVID-19 Tests received and pending',
    align: 'left'
  },

  labels: series.covid19GibraltarSeries.dates,
  xaxis: {
    type: 'datetime',
  },
  yaxis: [{
          title: {
            text: 'Number of people',
          }
        }]

};

var chart_active_recovered = new ApexCharts(document.querySelector("#chart_active_recovered"), options_active_recovered);
var chart_tests = new ApexCharts(document.querySelector("#chart_tests"), options_tests);

chart_active_recovered.render();
chart_tests.render();
    
</script>
